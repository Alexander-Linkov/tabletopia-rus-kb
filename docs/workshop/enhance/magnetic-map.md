# Создание магнитной карты

## О магнитной карте

Магнитная карта позволяет автоматически выравнивать и поворачивать выбранный тип объектов размещенный на карте. Она помогает легче размещать объекты на игровых полях и картах.

Когда пользователь перетаскивает объект над ячейкой магнитной карты, этот объект автоматически размещается в центре магнитной ячейки.

**Возможности магнитной карты:**

* Магнитная карта можно применить к игровому полю, карте или тайлу.
* Карты, тайлы, токены/жетоны, игровые фишки (миниатюры), кубики и счетчики могут независимо взаимодействовать с магнитной картой.
* Магнитная карта может быть квадратной или круглой.
* Угол автоматического поворота можно изменить для каждой ячейки магнитной карты.
* Объекты могут автоматически разворачиватся необходимой стороной (лицом или рубашкой) когда размещаются на карте.

**Примеры:**

![Магнитная карта в игре Age of Steam](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map1.png)

*Магнитная карта в игре Age of Steam*

![Магнитная карта в игре King's Forge](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map2.png)

*Магнитная карта в игре King's Forge*

![Магнитная карта в игре Septikon](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map3.png)

*Магнитная карта в игре Septikon*

## Создание магнитной карты

Магнитную карту необходимо создать заранее в графическом редакторе и затем загружена в Tabletopia. Магнитные карты можно создать для игровых полей, карт и тайлов.

**Чтобы создать магнитную карту:**

1. Откройте файл изображения для объекта, для которого вы будете использовать магнитную карту, в графическом редакторе, где есть возможность редактирования по слоям и экспорт в форматы PNG или JPEG, например GIMP, Photoshop или Paint.NET.
    
    ![magnetic_map4](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map4.png)

2. Создайте новый слой фона и заполните его черным цветом.

    ![magnetic_map5](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map5.png)

3. Сделайте изначальное изображение полупрозрачным.
4. Сделайте активным слой фона.
5. Нарисуйте магнитные ячейки используя инструменты графического редактора.
6. Когда вы закончите рисование, удалите изначальное изображение. Теперь у вас должно остаться только магнитные ячейки нарисованные на черном фоне.

    ![magnetic_map8](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map8.png)

### Что надо помнить при создании магнитной карты

* Можно использовать только **прямоугольные и круглые** формы. Другие формы приведут к неверному распознанию магнитной ячейки.

    ![magnetic_map9](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map9.png)

* Магнитные ячейки **не должны соприкасаться**. Должен быть зазор хотя бы в один пиксель. Пересечение приведет к неверному распознанию магнитных ячеек.

    ![magnetic_map10](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map10.png)
    ![magnetic_map11](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map11-320x273.png)

* Вы можете создать ячейки большего размера чем отмеченная зона на изначальном изображении. Но **центр ячеки должен совпадать** с центром отмеченной зоны.

    ![magnetic_map12](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map12.png)

### Цвета магнитных ячеек

![Примеры разных цветов](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map15.png)
    
Цвет магнитной ячейки определяет должна ли карта автоматически разворачиваться определенной стороной (рубашкой или лицом):

* **Красный цвет** ячейки заставляет объект автоматически развернуться **лицевой сторойно вверх**.
* **Синий цвет** ячейки заставляет объект автоматически развернуться **рубашкой вверх**.

Любые другие цвета (кроме черного) ячейки не заставляют объект автоматически развернуться. Объект останется в том же положении, в котором он был размещен.

### Автоматический разворот

При создании магнитно карты вы можете установить градус **автоматического разворота** размещенного объекта. Для этого **нарисуйте вектор**:

* Вектор должен быть ровно 1 пиксель шириной.

    ![magnetic_map19](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map19-600x254.png)

* Используйте любой цвет кроме черного, отличающийся от цвета ячейки.

    ![magnetic_map20](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map20-600x239.png)

* Вектор должен быть нарисован приблизительно из центра ячейки к ее краю.

    ![magnetic_map21](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map21-600x294.png)

> **Совет:** Если вам нужно много идентичных ячеек, просто скопируйте ячейку столько раз, сколько потребуется, поправляя угол при необходимости.

*Примеры:*

![magnetic_map16](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map16.png)

*Когда вектор направлен из центра вверх, карта разворачивается вверх.*

![magnetic_map17](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map17.png)

*Когда вектор направлен из центра вниз, карта разворачивается вниз.*

Если в ячейке нет вектора, размещенны объект не будет развернут при размещении.

![magnetic_map18](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map18.png)

*Карта не разворачивается автоматически, если вектора нет*

## Добавление магнитной карты к объекту

1. Когда вы закончили рисовать ячейки, удалите изначальное изображение. Теперь у вас есть только магнитные ячеки на черном фоне.

    ![magnetic_map22](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map22.png)

2. Сохраните изображение в .PNG файл.
3. Перейдите в Workshop в Tabletopia.
4. Создайте новый (нажмите **Create Object** в Workshop) или отредактируйте существующий объект (игровое поле, карту или тайл) для которого вы хотите использовать магнитное поле.
5. Нажмите **Configure Magnetic Map** в окне редактирования объекта и загрузите магнитную карту. Имейте ввиду, что размер начального изображения и его магнитной карты должны быть в точности одинаковыми.

    ![magnetic_map29](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map29.png)

6. Нажмите **Publish** и подождите пока сгенерируется предпросмотр магнитной карты. Откройте сгенерированное изображение и убедитесь, что все ячейки и векторы распознаны правильно.

    ![Правильная магнитная карта](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map26.png)

    *Правильная магнитная карта*

    ![В этой магнитной карте ошибка пересечения](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map27.png)

    *В этой магнитной карте ошибка пересечения*

7. Добавьте объект в сетап (смотрите [Сетап игры](../games/game-setups.md)) и проверьте снова, разместив объект на магнитной ячейке. В случае ошибки, исправьте карту в графическом редакторе и загрузите ее опять.

    ![magnetic_map28](http://help.tabletopia.com/wp-content/uploads/2015/06/magnetic_map28.png)

Поздравляем! Ваша магнитная карта готова.